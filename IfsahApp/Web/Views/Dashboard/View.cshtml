@model DisclosureDetailsViewModel

<div class="card shadow p-4">
    <h2>Disclosure Details</h2>
    <hr />
    <dl class="row">
        <dt class="col-sm-3">Reference</dt>
        <dd class="col-sm-9">@Model.Reference</dd>

        <dt class="col-sm-3">Type</dt>
        <dd class="col-sm-9">@Model.Type</dd>

        <dt class="col-sm-3">Date</dt>
        <dd class="col-sm-9">@Model.Date.ToString("g")</dd>

        <dt class="col-sm-3">Location</dt>
        <dd class="col-sm-9">@Model.Location</dd>

        <dt class="col-sm-3">Status</dt>
        <dd class="col-sm-9">@Model.Status</dd>

        <dt class="col-sm-3">Description</dt>
        <dd class="col-sm-9">@Model.Description</dd>
    </dl>
</div>

<!-- Comment + Assignment Section -->
<div class="card shadow mt-4 p-4">
    <h3>Admin Comments & Assignment</h3>
    <form asp-action="AddComment" asp-controller="Dashboard" method="post">
        <input type="hidden" asp-for="Id" />

        <div class="mb-3">
            <label asp-for="NewComment" class="form-label">Add Comment</label>
            <textarea asp-for="NewComment" class="form-control" rows="3"></textarea>
        </div>

        <div class="mb-3">
            <label asp-for="AssignToUserId" class="form-label">Assign To</label>
            <select asp-for="AssignToUserId" asp-items="Model.AvailableUsers" class="form-select">
                <option value="">-- Select User --</option>
            </select>
        </div>

        <button type="submit" class="btn btn-success">Submit</button>
        <a asp-action="Index" class="btn btn-secondary">Back</a>
    </form>
</div>

<!-- Display existing comments -->
<div class="card shadow mt-4 p-4">
    <h3>Previous Comments</h3>
    @if (Model.Comments.Any())
    {
        <ul class="list-group">
            @foreach (var comment in Model.Comments)
            {
                <li class="list-group-item">
                    <strong>@comment.Author</strong> (@comment.CreatedAt.ToString("g")):
                    <p>@comment.Text</p>
                </li>
            }
        </ul>
    }
    else
    {
        <p>No comments yet.</p>
    }
</div>
